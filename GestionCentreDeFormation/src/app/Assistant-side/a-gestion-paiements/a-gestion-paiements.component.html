<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Clean Blog - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet"
        type="text/css" />
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
        rel="stylesheet" type="text/css" />
</head>

<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="">Accueil</a>

            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4"
                            href="a-inscription-participant">Inscription des Participants</a></li>
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="a-gestion-paiements">Gestion des
                            Paiements</a></li>
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="a-gestion-compte">Compte </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Page Header-->
    <header class="masthead" style="background-image: url('assets/img/home-bg.jpg')">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div *ngIf="validUser" class="site-heading">Bonjour {{userObject.nom}} {{userObject.prenom}}</div>
                    <div class="site-heading">
                        <h1>Inti Formation</h1>
                        <span class="subheading">Projet de fin de Formation</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <h1 class="h1"> Gestion des paiements </h1>

    <h2 class="h2Paiment"> Paiements effectués</h2>
    <table width="100%">
        <thead>
            <tr>
                <th> ID </th>
                <th> Date du paiement </th>
                <th> Montant</th>
                <th> Reste à régler </th>
                <th> Participant </th>
                <th> ID Formation </th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let p of paiements">
                <td> {{p.idPaiement}} </td>
                <td> {{p.datePaiement}} </td>
                <td> {{p.montant}} </td>
                <td> {{p.reste}} </td>
                <td> {{p.participant.nom}} {{p.participant.prenom}} </td>
                <td> {{p.formation.idFormation}} </td>
                <td><button (click)="supprimer(p.idPaiement)">Supprimer</button></td>
                <td><button (click)="modifier(p.idPaiement)">Modifier</button></td>
            </tr>
        </tbody>
    </table>

    <br>
    <button class="CreerPaiement" (click)="ajouterPaiement()">
        <h6>Créer un paiement</h6>
    </button>
    <br> <br> <br>

    <h2 class="h2Participant">Liste des participants</h2>

    <table width="100%" *ngFor="let p of participants">

        <thead>
            <caption>
                <h6>Participant ID {{p.idUtilisateur}} : {{p.nom}} {{p.prenom}}</h6>
            </caption>
            <tr>

                <th>Id Formation</th>
                <th>Intitulé</th>
                <th>Description</th>
                <th>Date de début</th>
                <th>Date de fin</th>
                <th>Tarif</th>
                <th>Montant payé</th>
                <th>Montant à régler</th>
                <th></th>

            </tr>
        </thead>

        <tbody>

            <tr *ngFor="let f of p.listeFormations; index as i">
                <td>{{f.idFormation}}</td>
                <td>{{f.libFormation}}</td>
                <td>{{f.description}}</td>
                <td>{{f.dateDebut}}</td>
                <td>{{f.dateFin}}</td>
                <td>{{f.cout}}</td>
                <td>{{f.cout - p.restePaiements[i]}}</td>
                <td>{{p.restePaiements[i]}}</td>
                <td><button (click)="relancer(p.idUtilisateur, f.idFormation)">Relancer</button></td>
            </tr>

        </tbody>
        <br> <br>
    </table>

    <button class="retour" (click)="accueil()">
        <h6>Retour</h6>
    </button>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>